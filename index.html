import React, { useState, useEffect } from 'react';
import { Heart, ChevronLeft, ChevronRight, Save, Home, Battery, Zap, MessageCircle, Image as ImageIcon, Smile, Coffee, Hammer, Baby } from 'lucide-react';

// --- –î–ê–ù–ù–´–ï –ö–ù–ò–ì–ò ---
const bookData = [
    {
        id: 'cover',
        type: 'cover',
        title: "–õ—é–±–æ–≤—å, –ö–æ–≤–∏–¥ –∏ –†–æ–º–∞—à–∫–∞",
        subtitle: "–ò–ª–∏ –∫—Ä–∞—Ç–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è —Ç–æ–≥–æ, –∫–∞–∫ –º—ã –Ω–µ —É–±–∏–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –∑–∞ 8 –ª–µ—Ç",
        image: "https://placehold.co/600x800/fce7f3/db2777?text=–ù–∞—à–µ+–§–æ—Ç–æ+–ó–¥–µ—Å—å", 
        text: "–ü–æ—Å–≤—è—â–∞–µ—Ç—Å—è –ù–∞—Å—Ç–µ. –ú–æ–µ–π –∂–µ–Ω–µ, –º–∞—Ç–µ—Ä–∏ –¥—Ä–∞–∫–æ–Ω–æ–≤ (–ö–∏—Ä—ã –∏ –†–æ–º—ã) –∏ –≥–ª–∞–≤–Ω–æ–º—É –ø—Ä–æ—Ä–∞–±—É –Ω–∞—à–µ–π –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π —Å—Ç—Ä–æ–π–∫–∏."
    },
    {
        id: 'prologue',
        type: 'chapter',
        chapter: "–ü—Ä–æ–ª–æ–≥",
        title: "64 –ú–µ–≥–∞–±–∞–π—Ç–∞ –∂–∏–∑–Ω–∏",
        year: "–ù–∞—á–∞–ª–æ –Ω–∞—á–∞–ª",
        icon: "üíæ",
        text: "–ï—Å–ª–∏ —Ä–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –Ω–∞—à—É –ø–µ—Ä–µ–ø–∏—Å–∫—É, –±—É–º–∞–≥–∏ —Ö–≤–∞—Ç–∏—Ç, —á—Ç–æ–±—ã –æ–±–∫–ª–µ–∏—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—É –≤–º–µ—Å—Ç–æ –æ–±–æ–µ–≤ (–∫—Å—Ç–∞—Ç–∏, –Ω–µ –ø–æ–¥–∞–≤–∞–π –º–Ω–µ –∏–¥–µ–π –¥–ª—è —Ä–µ–º–æ–Ω—Ç–∞). –ù–æ –µ—Å–ª–∏ –≤—ã–∂–∞—Ç—å –∏–∑ —ç—Ç–∏—Ö 64 –º–µ–≥–∞–±–∞–π—Ç —Å—É—Ç—å, –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≥–ª–∞–≤–Ω–æ–µ: –º—ã –Ω–∞—á–∞–ª–∏ —Å –Ω–µ–ª–µ–ø—ã—Ö —Å—Ç–∏–∫–µ—Ä–æ–≤, –∞ –ø—Ä–∏—à–ª–∏ –∫ —Ç–æ–º—É, —á—Ç–æ —Å–ø–æ—Ä–∏–º –ø—Ä–æ —Ä–æ–∑–µ—Ç–∫–∏ Werkel. –ò —ç—Ç–æ –±—ã–ª–æ –ª—É—á—à–µ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏."
    },
    {
        id: 'ch1',
        type: 'chapter',
        chapter: "–ì–ª–∞–≤–∞ 1",
        title: "–õ–æ–∫ –∫—É—Ä–∏—á–∞–º –∏ –ì—É—Å–µ–Ω–∏—Ü—ã",
        year: "2018",
        icon: "üêõ",
        image: "https://placehold.co/600x400/e2e8f0/64748b?text=–§–æ—Ç–æ+2018+(–°—Ç–∏–∫–µ—Ä—ã)",
        content: (
            <>
                <p className="mb-4">–ò—é–Ω—å 2018 –≥–æ–¥–∞. –≠–ø–æ—Ö–∞, –∫–æ–≥–¥–∞ –º—ã –µ—â–µ –≤—ã—Å—ã–ø–∞–ª–∏—Å—å. –ú—ã –Ω–∞—á–∞–ª–∏ –æ–±—â–∞—Ç—å—Å—è –Ω–µ —Å –≤—ã—Å–æ–∫–∏—Ö –º–∞—Ç–µ—Ä–∏–π, –∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ø—Ä–æ—á–Ω–æ—Å—Ç—å. –Ø —Å–ª–∞–ª —Ç–µ–±–µ —Å—Ç–∏–∫–µ—Ä–æ–≤ —Å —É–ø–æ—Ä–æ—Ç—ã–º–∏ –≥—É—Å–µ–Ω–∏—Ü–∞–º–∏.</p>
                <div className="mb-4 italic border-l-4 border-pink-400 pl-4 bg-pink-50 p-2 rounded-r">
                    <p>‚Äî –í–∏–¥–∂–∞–æ–ª—ã–Ω–µ–Ω.</p>
                    <p>‚Äî –õ–æ–∫ –∫—É—Ä–∏—á–∞–º.</p>
                </div>
                <p>–î–ª—è –≤—Å–µ–≥–æ –º–∏—Ä–∞ —ç—Ç–æ –Ω–∞–±–æ—Ä –∑–≤—É–∫–æ–≤. –î–ª—è –Ω–∞—Å —ç—Ç–æ –æ–∑–Ω–∞—á–∞–ª–æ: ¬´–ú—ã –Ω–∞ –æ–¥–Ω–æ–π –≤–æ–ª–Ω–µ¬ª. –ú—ã –≥—É–ª—è–ª–∏, –æ–±—Å—É–∂–¥–∞–ª–∏ Burning Man –∏ –º–æ—é ¬´–æ–¥–Ω—É –ø–µ—Å–Ω—é –Ω–∞ –≥–∏—Ç–∞—Ä–µ¬ª.</p>
            </>
        )
    },
    {
        id: 'ch2',
        type: 'chapter',
        chapter: "–ì–ª–∞–≤–∞ 2",
        title: "–ö–æ–≤–∏–¥–Ω—ã–π –±—É–Ω–∫–µ—Ä",
        year: "2020",
        icon: "üè†",
        image: "https://placehold.co/600x400/e2e8f0/64748b?text=–§–æ—Ç–æ+–≤+–º–∞—Å–∫–∞—Ö+–∏–ª–∏+–¥–æ–º–∞",
        content: (
            <>
                <p className="mb-4">–ú–∏—Ä —Å–æ—à–µ–ª —Å —É–º–∞. –¢—ã –ø–∏—à–µ—à—å: <b>¬´–£ –Ω–∞—Å –∫–∞—Ä–∞–Ω—Ç–∏–Ω¬ª</b>. –Ø (—Å –æ–ø—Ç–∏–º–∏–∑–º–æ–º): <b>¬´–û—Ö—É–µ–Ω–Ω–æ¬ª</b>.</p>
                <p className="mb-4">–≠—Ç–æ –±—ã–ª –Ω–∞—à –∫—Ä–∞—à-—Ç–µ—Å—Ç. 24/7 –≤–º–µ—Å—Ç–µ. –¢—ã —Ä—É–ª–∏–ª–∞ –ï–≤—Ä–æ–ø–æ–π —á–µ—Ä–µ–∑ Zoom, —è —Å—Ç–∞—Ä–∞–ª—Å—è –Ω–µ –≥—Ä–µ–º–µ—Ç—å –ø–æ—Å—É–¥–æ–π. </p>
                <p>–ú—ã –≤—ã—è—Å–Ω–∏–ª–∏ –≥–ª–∞–≤–Ω–æ–µ: –º—ã –º–æ–∂–µ–º –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –∑–∞–º–∫–Ω—É—Ç–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –∏ –Ω–µ —Ö–æ—Ç–µ—Ç—å —É–±–∏—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥–∞. –ú–∞–∫—Å–∏–º—É–º ‚Äî —Å–ª–µ–≥–∫–∞ –ø–æ–∫—É—Å–∞—Ç—å. –ú—ã —Å—Ç–∞–ª–∏ –∫–æ–º–∞–Ω–¥–æ–π.</p>
            </>
        )
    },
    {
        id: 'ch3',
        type: 'chapter',
        chapter: "–ì–ª–∞–≤–∞ 3",
        title: "–ö–∏—Ä–∞ –∏ –í–µ–ª–∏–∫–∏–π –†–∏—Å",
        year: "2021-2023",
        icon: "üçö",
        image: "https://placehold.co/600x400/e2e8f0/64748b?text=–§–æ—Ç–æ+–ö–∏—Ä—ã",
        content: (
            <>
                <p className="mb-4">–° –ø–æ—è–≤–ª–µ–Ω–∏–µ–º –ö–∏—Ä—ã —á–∞—Ç —Å—Ç–∞–ª –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–º. ¬´–¢–∏—Ö–æ! –û–Ω–∞ —Å–ø–∏—Ç¬ª ‚Äî –Ω–∞—à –¥–µ–≤–∏–∑.</p>
                <p className="mb-4">–Ø–Ω–≤–∞—Ä—å 2022. –ö–∏—Ä–∞ –≤—ã–¥–∞–µ—Ç –±–∞–∑—É: <b>¬´–°–Ω–µ–≥ ‚Äî —ç—Ç–æ —Ä–∏—Å¬ª</b>. –ò –≤–µ–¥—å –Ω–µ –ø–æ—Å–ø–æ—Ä–∏—à—å.</p>
                <p>–ë—ã–ª–∏ –∏ –º–æ–∫—Ä—ã–µ —Ç—Ä—É—Å—ã, –∏ —Ä–∞–∑—Ä–∏—Å–æ–≤–∞–Ω–Ω—ã–µ –æ–±–æ–∏. –ú—ã —É—á–∏–ª–∏—Å—å –±—ã—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏ –±–µ–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, —á–∏—Å—Ç–æ –Ω–∞ –∏–Ω—Ç—É–∏—Ü–∏–∏ –∏ –ª—é–±–≤–∏.</p>
            </>
        )
    },
    {
        id: 'ch4',
        type: 'chapter',
        chapter: "–ì–ª–∞–≤–∞ 4",
        title: "–ò–º–ø–µ—Ä–∏—è –†–æ–º–∞–Ω–∞",
        year: "2024-2025",
        icon: "üèõÔ∏è",
        image: "https://placehold.co/600x400/e2e8f0/64748b?text=–§–æ—Ç–æ+–†–æ–º—ã+–∏–ª–∏+–í—ã–ø–∏—Å–∫–∞",
        content: (
            <>
                <p className="mb-4">–í–µ–ª–∏–∫–∏–µ –¥–µ–±–∞—Ç—ã –∏–º–µ–Ω. –ú–∞–∫—Å–∏–º? –î–µ–Ω–∏—Å? –ü–æ–±–µ–¥–∏–ª –†–∏–º–ª—è–Ω–∏–Ω. –†–æ–º–∏—É—Å. –†–æ–º–∞—à–∫–∞.</p>
                <p className="mb-4">–ú–∞—Ä—Ç 2025-–≥–æ. –ë–æ–ª—å–Ω–∏—Ü—ã, —Å–æ—Å–µ–¥–∫–∏ –ø–æ –ø–∞–ª–∞—Ç–µ, –º–æ–∏ –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ –∑–∞–±—ã—Ç—å –¥–µ—Ç–µ–π –ø—Ä–∏ —Å–±–æ—Ä–∞—Ö. </p>
                <p>–†–æ–º–∞ –≤–æ—Ä–≤–∞–ª—Å—è –≥—Ä–æ–º–∫–æ. –¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –∫–æ–º–ø–ª–µ–∫—Ç: –ö–∏—Ä–∞ —É—á–∏—Ç –±—Ä–∞—Ç–∞ –∂–∏–∑–Ω–∏, –∞ –†–æ–º–∞ –ø—Ä–æ—Å—Ç–æ —Ö–æ—á–µ—Ç –Ω–∞ —Ä—É—á–∫–∏.</p>
            </>
        )
    },
    {
        id: 'ch5',
        type: 'chapter',
        chapter: "–ì–ª–∞–≤–∞ 5",
        title: "–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –†–µ–º–æ–Ω—Ç",
        year: "2026",
        icon: "üîå",
        image: "https://placehold.co/600x400/e2e8f0/64748b?text=–§–æ—Ç–æ+–†–µ–º–æ–Ω—Ç–∞+–∏–ª–∏+–õ–µ—Ä—É–∞",
        content: (
            <>
                <p className="mb-4">–ï—Å–ª–∏ –º—ã –ø–µ—Ä–µ–∂–∏–ª–∏ –ö–æ–≤–∏–¥ –∏ –¥–≤–æ–∏—Ö –¥–µ—Ç–µ–π, —Ç–æ —Ä–µ–º–æ–Ω—Ç... —ç—Ç–æ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –±–æ—Å—Å.</p>
                <div className="bg-white p-3 rounded-lg shadow-md border border-gray-100 text-sm text-gray-700 mb-4">
                    <p className="mb-1"><span className="font-bold text-pink-600">–ù–∞—Å—Ç—è:</span> (–°—Å—ã–ª–∫–∞ –Ω–∞ —Ä–æ–∑–µ—Ç–∫—É Werkel) –ù–∞–º –Ω—É–∂–Ω–æ 15 —à—Ç—É–∫.</p>
                    <p className="mb-1"><span className="font-bold text-blue-600">–í–∏—Ç—è:</span> –¢–æ –µ—Å—Ç—å —Ç—ã —Ç–æ—á–Ω–æ —É–≤–µ—Ä–µ–Ω–∞, —á—Ç–æ –∑–∞ 3 –º–µ—Å –º—ã —Ä–µ–º–æ–Ω—Ç –Ω–µ –∑–∞–∫–æ–Ω—á–∏–º))</p>
                    <p><span className="font-bold text-pink-600">–ù–∞—Å—Ç—è:</span> –ï–¥—å –≤ –õ–µ—Ä—É–∞.</p>
                </div>
                <p>–ù–æ –¥–∞–∂–µ –∫–æ–≥–¥–∞ —è –≤–æ—Ä—á—É –≤ –ø—Ä–æ–±–∫–µ, —è –∑–Ω–∞—é: —è –µ–¥—É –≤ –Ω–∞—à –¥–æ–º. –ö–æ—Ç–æ—Ä—ã–π –º—ã —Å—Ç—Ä–æ–∏–º –≤–º–µ—Å—Ç–µ.</p>
            </>
        )
    },
    {
        id: 'stats',
        type: 'stats',
        title: "–ù–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
        subtitle: "–ú–∞–≥–∏—è –±–æ–ª—å—à–∏—Ö —á–∏—Å–µ–ª",
        stats: [
            { label: "–°–æ–æ–±—â–µ–Ω–∏–π", value: "154,302", icon: <MessageCircle className="w-5 h-5" />, color: "bg-blue-100 text-blue-600" },
            { label: "–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π", value: "12,400", icon: <ImageIcon className="w-5 h-5" />, color: "bg-purple-100 text-purple-600" },
            { label: "–°—Ç–∏–∫–µ—Ä–æ–≤", value: "8,921", icon: <Smile className="w-5 h-5" />, color: "bg-yellow-100 text-yellow-600" },
            { label: "–î–Ω–µ–π –±–µ–∑ —Å–Ω–∞", value: "‚àû", icon: <Coffee className="w-5 h-5" />, color: "bg-amber-100 text-amber-700" },
            { label: "–î–µ—Ç–µ–π", value: "2", icon: <Baby className="w-5 h-5" />, color: "bg-pink-100 text-pink-600" },
            { label: "–†–µ–º–æ–Ω—Ç–æ–≤", value: "1", icon: <Hammer className="w-5 h-5" />, color: "bg-slate-100 text-slate-600" }
        ]
    },
    {
        id: 'epilogue',
        type: 'epilogue',
        title: "–≠–ø–∏–ª–æ–≥",
        content: (
            <>
                <p className="mb-6 font-serif text-lg">–ù–∞—Å—Ç—è,<br/>–¢—ã –ø–æ–¥–∞—Ä–∏–ª–∞ –º–Ω–µ –ö–∏—Ä—É (–∫–æ—Ç–æ—Ä–∞—è –≤–∏–¥–∏—Ç —Ä–∏—Å –≤–º–µ—Å—Ç–æ —Å–Ω–µ–≥–∞).<br/>–¢—ã –ø–æ–¥–∞—Ä–∏–ª–∞ –º–Ω–µ –†–æ–º—É.<br/>–¢—ã –ø–æ–¥–∞—Ä–∏–ª–∞ –º–Ω–µ —Å–µ–¥—ã–µ –≤–æ–ª–æ—Å—ã (–Ω–µ–º–Ω–æ–≥–æ) –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ —Å—á–∞—Å—Ç—å–µ (–º–Ω–æ–≥–æ).</p>
                <p className="mb-6">–°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ç–µ—Ä–ø–∏—à—å –º–æ–∏ —à—É—Ç–∫–∏ –∏ —Å—Ç—Ä—è–ø–Ω—é. <br/>–Ø –ª—é–±–ª—é —Ç–µ–±—è.</p>
                <p className="font-bold text-xl text-pink-600">–° 14 —Ñ–µ–≤—Ä–∞–ª—è!</p>
                <p className="mt-8 text-sm text-gray-500">–¢–≤–æ–π –í–∏—Ç—è üë®üèª‚Äçüç≥</p>
            </>
        )
    }
];

// --- –ö–û–ú–ü–û–ù–ï–ù–¢–´ ---

const GlobalStyles = () => (
    <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&family=Montserrat:wght@400;600;800&display=swap');
        
        .font-serif {
            font-family: 'Merriweather', serif;
        }
        .font-sans {
            font-family: 'Montserrat', sans-serif;
        }
        .fade-in {
            animation: fadeIn 0.8s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .heart-beat {
            animation: heartbeat 1.5s infinite;
        }
        @keyframes heartbeat {
            0% { transform: scale(1); }
            15% { transform: scale(1.3); }
            30% { transform: scale(1); }
            45% { transform: scale(1.15); }
            60% { transform: scale(1); }
        }
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .count-up {
            animation: countUp 2s ease-out forwards;
        }
    `}</style>
);

const LoveCounter = () => {
    // –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π (–ø—Ä–∏–º–µ—Ä–Ω–æ –∏—é–Ω—å 2018)
    const startDate = new Date('2018-06-01');
    const [diff, setDiff] = useState({ years: 0, days: 0, hours: 0 });

    useEffect(() => {
        const calculateTime = () => {
            const now = new Date();
            const diffTime = Math.abs(now - startDate);
            const diffDaysTotal = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            const years = Math.floor(diffDaysTotal / 365);
            const days = diffDaysTotal % 365;
            const hours = now.getHours();
            setDiff({ years, days, hours });
        };
        
        calculateTime();
        const timer = setInterval(calculateTime, 60000); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
        return () => clearInterval(timer);
    }, []);

    return (
        <div className="text-center py-4 bg-white/60 backdrop-blur-sm rounded-xl my-4 mx-4 shadow-sm border border-pink-100">
            <p className="text-xs text-gray-500 uppercase tracking-widest mb-1">–ú—ã –≤–º–µ—Å—Ç–µ —É–∂–µ</p>
            <div className="flex justify-center items-baseline gap-2 text-pink-600 font-bold">
                <span className="text-2xl">{diff.years}</span><span className="text-sm font-normal text-gray-500">–ª–µ—Ç</span>
                <span className="text-2xl">{diff.days}</span><span className="text-sm font-normal text-gray-500">–¥–Ω–µ–π</span>
            </div>
        </div>
    );
};

const StatCard = ({ label, value, icon, color }) => (
    <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex flex-col items-center justify-center gap-2 transition hover:scale-105 hover:shadow-md">
        <div className={`p-3 rounded-full ${color} mb-1`}>
            {icon}
        </div>
        <span className="text-2xl font-extrabold text-gray-800 font-sans">{value}</span>
        <span className="text-xs text-gray-500 uppercase tracking-wider font-semibold">{label}</span>
    </div>
);

const Page = ({ data, isActive, onNext, onPrev, isFirst, isLast }) => {
    if (!isActive) return null;

    return (
        <div className="fade-in w-full h-full bg-white shadow-2xl overflow-hidden relative flex flex-col font-sans">
            {/* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å (–ü—Ä–æ–≥—Ä–µ—Å—Å) */}
            <div className="h-1.5 bg-gray-100 w-full flex shrink-0">
                    {bookData.map((_, idx) => (
                        <div 
                        key={idx} 
                        className={`h-full flex-1 border-r border-white transition-colors duration-300 ${data.id === bookData[idx].id ? 'bg-pink-500' : 'bg-pink-100'}`}
                        ></div>
                    ))}
            </div>

            <div className="flex-1 overflow-y-auto no-scrollbar pb-24">
                {/* –û–±–ª–æ–∂–∫–∞ */}
                {data.type === 'cover' && (
                    <div className="flex flex-col items-center justify-center min-h-full p-8 text-center bg-gradient-to-br from-pink-50 via-white to-pink-100">
                        <div className="text-6xl mb-6 text-pink-500 heart-beat drop-shadow-sm">‚ù§Ô∏è</div>
                        <h1 className="text-3xl md:text-4xl font-serif font-bold text-gray-800 mb-4 leading-tight">{data.title}</h1>
                        <p className="text-gray-600 italic mb-8 px-4 border-t border-b border-pink-200 py-4">{data.subtitle}</p>
                        <div className="w-full max-w-xs aspect-[3/4] bg-gray-200 rounded-lg overflow-hidden mb-8 shadow-lg relative transform rotate-1 border-4 border-white">
                            <img src={data.image} alt="Cover" className="w-full h-full object-cover" />
                        </div>
                        <p className="text-xs text-gray-400 uppercase tracking-wider mb-2">–ê–Ω–Ω–æ—Ç–∞—Ü–∏—è</p>
                        <p className="text-sm text-gray-600 max-w-xs mx-auto leading-relaxed">{data.text}</p>
                    </div>
                )}

                {/* –ì–ª–∞–≤—ã */}
                {data.type === 'chapter' && (
                    <div className="p-6 md:p-8">
                        <div className="flex items-center justify-between mb-8 border-b border-gray-100 pb-4">
                            <span className="text-pink-500 font-bold tracking-widest text-xs uppercase bg-pink-50 px-2 py-1 rounded-full">{data.chapter}</span>
                            <span className="text-gray-400 font-bold text-xs font-mono">{data.year}</span>
                        </div>
                        
                        <h2 className="text-2xl md:text-3xl font-serif font-bold text-gray-800 mb-2 leading-snug">{data.title}</h2>
                        
                        <div className="flex justify-center my-6">
                            <div className="w-16 h-16 bg-pink-50 rounded-full flex items-center justify-center text-3xl shadow-inner">
                                {data.icon}
                            </div>
                        </div>
                        
                        {data.image && (
                                <div className="w-full h-56 bg-gray-100 rounded-xl overflow-hidden mb-8 shadow-md relative group">
                                <img src={data.image} alt={data.title} className="w-full h-full object-cover transition duration-500 group-hover:scale-105" />
                                </div>
                        )}

                        <div className="prose prose-pink text-gray-700 leading-relaxed font-serif text-lg">
                            {data.content ? data.content : <p>{data.text}</p>}
                        </div>
                    </div>
                )}

                {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */}
                {data.type === 'stats' && (
                     <div className="p-6 md:p-8 min-h-full bg-slate-50">
                        <div className="text-center mb-8">
                            <h2 className="text-3xl font-serif font-bold text-gray-800 mb-2">{data.title}</h2>
                            <p className="text-gray-500">{data.subtitle}</p>
                        </div>
                        
                        <div className="grid grid-cols-2 gap-4">
                            {data.stats.map((stat, idx) => (
                                <StatCard key={idx} {...stat} />
                            ))}
                        </div>

                        <div className="mt-8 bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                             <h3 className="text-lg font-bold text-gray-700 mb-4">–ï—â—ë –Ω–µ–º–Ω–æ–≥–æ —Ñ–∞–∫—Ç–æ–≤:</h3>
                             <ul className="space-y-3">
                                <li className="flex items-start gap-3 text-gray-600">
                                    <span className="text-pink-500 font-bold">‚Ä¢</span>
                                    <span>–í–µ—Å –∞—Ä—Ö–∏–≤–∞ –ø–µ—Ä–µ–ø–∏—Å–∫–∏: <b>64 MB</b> (—ç—Ç–æ –∫–∞–∫ 45,000 —Å—Ç—Ä–∞–Ω–∏—Ü ¬´–í–æ–π–Ω—ã –∏ –ú–∏—Ä–∞¬ª)</span>
                                </li>
                                <li className="flex items-start gap-3 text-gray-600">
                                    <span className="text-pink-500 font-bold">‚Ä¢</span>
                                    <span>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤ ¬´–õ—é–±–ª—é¬ª: <b>–ù–µ –ø–æ–¥–¥–∞–µ—Ç—Å—è –∏—Å—á–∏—Å–ª–µ–Ω–∏—é</b></span>
                                </li>
                             </ul>
                        </div>
                     </div>
                )}

                {/* –≠–ø–∏–ª–æ–≥ */}
                {data.type === 'epilogue' && (
                    <div className="p-8 min-h-full flex flex-col justify-center text-center bg-gradient-to-t from-pink-50 via-white to-white">
                        <div className="flex justify-center mb-6">
                            <Zap className="text-yellow-400 w-12 h-12" />
                        </div>
                        <h2 className="text-3xl font-serif font-bold text-gray-800 mb-8">{data.title}</h2>
                        
                        <LoveCounter />

                        <div className="bg-white p-8 rounded-2xl shadow-xl border border-pink-100 my-8 transform -rotate-1 relative overflow-hidden">
                            <div className="absolute top-0 left-0 w-full h-2 bg-pink-400"></div>
                            {data.content}
                        </div>

                        <div className="mt-auto">
                            <button 
                                onClick={() => alert('–Ø —Ç–æ–∂–µ —Ç–µ–±—è –ª—é–±–ª—é! ‚ù§Ô∏è')}
                                className="bg-gradient-to-r from-pink-500 to-rose-500 text-white px-8 py-4 rounded-full font-bold shadow-lg shadow-pink-200 hover:shadow-xl hover:scale-105 transition-all duration-300 w-full flex items-center justify-center gap-2"
                            >
                                <Heart className="w-5 h-5 fill-current" />
                                –°–∫–∞–∑–∞—Ç—å ¬´–õ—é–±–ª—é¬ª
                            </button>
                        </div>
                    </div>
                )}
            </div>

            {/* –ù–∞–≤–∏–≥–∞—Ü–∏—è */}
            <div className="absolute bottom-0 left-0 right-0 p-4 bg-white/95 backdrop-blur-md border-t border-gray-100 flex justify-between items-center z-10 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
                <button 
                    onClick={onPrev} 
                    disabled={isFirst}
                    className={`p-3 rounded-full transition-all ${isFirst ? 'text-gray-300' : 'text-gray-700 hover:bg-pink-50 hover:text-pink-600 active:scale-95'}`}
                >
                    <ChevronLeft className="w-6 h-6" />
                </button>
                
                <span className="text-[10px] font-bold text-gray-400 uppercase tracking-widest">
                    {data.type === 'cover' ? '–ù–∞—á–∞–ª–æ' : data.type === 'epilogue' ? '–ö–æ–Ω–µ—Ü' : '–°—Ç—Ä–∞–Ω–∏—Ü–∞'}
                </span>

                <button 
                    onClick={onNext} 
                    disabled={isLast}
                    className={`p-3 rounded-full transition-all ${isLast ? 'text-gray-300' : 'text-gray-700 hover:bg-pink-50 hover:text-pink-600 active:scale-95'}`}
                >
                    <ChevronRight className="w-6 h-6" />
                </button>
            </div>
        </div>
    );
};

export default function App() {
    const [currentPage, setCurrentPage] = useState(0);

    const nextPage = () => {
        if (currentPage < bookData.length - 1) setCurrentPage(p => p + 1);
    };

    const prevPage = () => {
        if (currentPage > 0) setCurrentPage(p => p - 1);
    };

    return (
        <div className="min-h-screen bg-gray-200 flex items-center justify-center p-0 md:p-4 font-sans text-gray-900">
            <GlobalStyles />
            <div className="w-full max-w-md h-[100dvh] md:h-[850px] md:rounded-[2.5rem] overflow-hidden shadow-2xl ring-8 ring-gray-900/5">
                <Page 
                    data={bookData[currentPage]} 
                    isActive={true}
                    onNext={nextPage}
                    onPrev={prevPage}
                    isFirst={currentPage === 0}
                    isLast={currentPage === bookData.length - 1}
                />
            </div>
        </div>
    );
}